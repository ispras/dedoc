<!doctype html>
<html lang="ru">
<head>
    <title>Doc reader | Обучение классификаторов</title>
    <link rel="shortcut icon" href="static_file?fname=favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="static_file?fname=styles.css&directory=online_docs" />
    <meta name="viewport" content="width=device-width">
</head>
<div class="content">
<h2>Дообучение классификаторов</h2>
<h3>Классификатор типа строк</h3>
В целом навыки дообучения классификаторов всё ещё передаются устным народным творчеством, лучше спросите Илью Козлова.
<p>Переобучение классификатора происходит с помощью скрипта docreader/doc_reader/scripts/train_scanned_line_classifier.py</p>
<p>П Необходимо указать путь до изображений документов и файла с json с обучающими данными.</p>
<p>Обучающий файл должен быть в формате jsonlines, каждая строчка должна содержать информацию про 1 документ.</p>
<pre><code>
    {
    "name" (str) название документа
    "page_num" (int) номер страницы
    "entities":
        [
            "x" (int) x координата левая верхняя граница ббокса (в пикселях)
            "y" (int) y координата левая верхняя граница ббокса (в пикселях)
            "width" (int) ширина ббокса в пикселях
            "height" (int) высота ббокса в пикселях
            "text" (str) текст ббокса
            "label" (str) правильный лейбл
        ]
    }<br /><br />
</code></pre>

<h3>Классификатор ориентации изображения документа</h3>
<p>Переобучение классификатора ориентации происходит с помощью скрипта docreader/doc_reader/scripts/train_acc_orientation_classifier.py</p>
<p>Скрипт принимает следующие параметры:</p>
<pre><code>
usage: train_acc_orientation_classifier.py [-h]
-t TRAIN [-s CHECKPOINT_SAVE][-l CHECKPOINT_LOAD][-f FROM_CHECKPOINT] -d INPUT_DATA_FOLDER
</code></pre>
<pre><code>
optional arguments
  -h, --help show this help message and exit
  -t TRAIN, --train TRAIN
   (--train True) или проверку модели (--train False)
  -s CHECKPOINT_SAVE, --checkpoint_save CHECKPOINT_SAVE
   Путь до весов checkpoint.pth для сохранения
   (используется только для этапа тренировки)
  -l CHECKPOINT_LOAD, --checkpoint_load CHECKPOINT_LOAD
   Путь до весов checkpoint.pth, которые будут загружены в модель
   -f FROM_CHECKPOINT, --from_checkpoint FROM_CHECKPOINT
  Флаг установливается, если обучение нужно продолжить из чекпоинта,
  указанного в CHECKPOINT_LOAD
   -d INPUT_DATA_FOLDER, --input_data_folder INPUT_DATA_FOLDER
   Путь до папки с тренировочными (подпапка train) и тестовыми данными (подпапка test).
   Пример с данными лежит в папке example_data_orientation. Можно указать путь до нее.
  </code></pre>
</div>